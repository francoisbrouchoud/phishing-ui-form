<div class="app-container">
  <mat-card class="url-card">
    <mat-card-title>{{ title }}</mat-card-title>
    <mat-card-subtitle>
      Entrez une URL pour extraire les caractéristiques lexicales.
    </mat-card-subtitle>

    <mat-card-content>
      <form (ngSubmit)="analyze()" class="url-form">
        <mat-form-field appearance="outline" class="url-input">
          <mat-label>URL à analyser</mat-label>
          <input
            matInput
            type="text"
            [formControl]="urlControl"
            placeholder="https://exemple.com/login?user=123"
          />
          <button
            *ngIf="urlControl.value"
            matSuffix
            mat-icon-button
            type="button"
            aria-label="Effacer"
            (click)="clearUrl()"
          >
            <mat-icon>clear</mat-icon>
          </button>
          <mat-error *ngIf="urlControl.hasError('required')">
            L'URL est obligatoire.
          </mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit">
          Analyser
        </button>
      </form>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
    </mat-card-content>
  </mat-card>

  <mat-accordion *ngIf="features as f" class="features-accordion">
    <mat-expansion-panel [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>Features extraites</mat-panel-title>
        <mat-panel-description>
          URLLength: {{ f.URLLength }} • Domain: {{ f.Domain }}
        </mat-panel-description>
      </mat-expansion-panel-header>

      <table class="features-table">
        <tbody>
          <tr>
            <td class="feature-name">URL</td>
            <td class="feature-value">{{ f.URL }}</td>
          </tr>
          <tr>
            <td class="feature-name">URLLength</td>
            <td class="feature-value">{{ f.URLLength }}</td>
          </tr>
          <tr>
            <td class="feature-name">Domain</td>
            <td class="feature-value">{{ f.Domain }}</td>
          </tr>
          <tr>
            <td class="feature-name">DomainLength</td>
            <td class="feature-value">{{ f.DomainLength }}</td>
          </tr>
          <tr>
            <td class="feature-name">TLD</td>
            <td class="feature-value">{{ f.TLD }}</td>
          </tr>
          <tr>
            <td class="feature-name">TLDLength</td>
            <td class="feature-value">{{ f.TLDLength }}</td>
          </tr>
          <tr>
            <td class="feature-name">NoOfSubDomain</td>
            <td class="feature-value">{{ f.NoOfSubDomain }}</td>
          </tr>
          <tr>
            <td class="feature-name">IsDomainIP</td>
            <td class="feature-value">{{ f.IsDomainIP }}</td>
          </tr>

          <tr>
            <td class="feature-name">NoOfLettersInURL</td>
            <td class="feature-value">{{ f.NoOfLettersInURL }}</td>
          </tr>
          <tr>
            <td class="feature-name">NoOfDegitsInURL</td>
            <td class="feature-value">{{ f.NoOfDegitsInURL }}</td>
          </tr>
          <tr>
            <td class="feature-name">NoOfOtherSpecialCharsInURL</td>
            <td class="feature-value">{{ f.NoOfOtherSpecialCharsInURL }}</td>
          </tr>

          <tr>
            <td class="feature-name">LetterRatioInURL</td>
            <td class="feature-value">
              {{ f.LetterRatioInURL | number: '1.4-4' }}
            </td>
          </tr>
          <tr>
            <td class="feature-name">DegitRatioInURL</td>
            <td class="feature-value">
              {{ f.DegitRatioInURL | number: '1.4-4' }}
            </td>
          </tr>
          <tr>
            <td class="feature-name">SpacialCharRatioInURL</td>
            <td class="feature-value">
              {{ f.SpacialCharRatioInURL | number: '1.4-4' }}
            </td>
          </tr>
          <tr>
            <td class="feature-name">CharContinuationRate</td>
            <td class="feature-value">
              {{ f.CharContinuationRate | number: '1.4-4' }}
            </td>
          </tr>

          <tr>
            <td class="feature-name">NoOfQMarkInURL</td>
            <td class="feature-value">{{ f.NoOfQMarkInURL }}</td>
          </tr>
          <tr>
            <td class="feature-name">NoOfEqualsInURL</td>
            <td class="feature-value">{{ f.NoOfEqualsInURL }}</td>
          </tr>
          <tr>
            <td class="feature-name">NoOfAmpersandInURL</td>
            <td class="feature-value">{{ f.NoOfAmpersandInURL }}</td>
          </tr>
        </tbody>
      </table>
    </mat-expansion-panel>
  </mat-accordion>
</div>
